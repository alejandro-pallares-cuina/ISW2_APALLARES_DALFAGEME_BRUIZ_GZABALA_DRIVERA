{% extends 'base.html' %}

{% block title %}
    Relecloud - {{ destination }}
{% endblock title %}

{% block content %}
    <h1>{{ destination }}</h1>

    <p>
        {{ destination.description }}
    </p>

    <p>You can explore {{ destination }} on the following cruises: </p>

    <ul class="list-group mb-4">
        {% for cruise in destination.cruises.all %}
            <a class="list-group-item list-group-item-action" href="{% url 'cruise_detail' cruise.id %}">
                {{ cruise }}
            </a>
        {% endfor %}
    </ul>

    <hr>

    <h2>Reviews</h2>

    {% if destination.reviews.all %}
        <ul class="list-group mt-3">
            {% for review in destination.reviews.all %}
                <li class="list-group-item">
                    <div>
                        <strong>{{ review.user.username }}</strong>
                        - {{ review.rating }}⭐
                    </div>

                    {% if review.title %}
                        <div><em>{{ review.title }}</em></div>
                    {% endif %}

                    {% if review.comment %}
                        <p>{{ review.comment }}</p>
                    {% endif %}

                    <small>{{ review.created_at }}</small>

                    {% if user.is_authenticated and review.user_id == user.id %}
                        <div class="mt-2">
                            <a href="{% url 'review_update' review.id %}" class="btn btn-sm btn-primary">
                                Edit
                            </a>
                            <a href="{% url 'review_delete' review.id %}" class="btn btn-sm btn-danger">
                                Delete
                            </a>
                        </div>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="mt-3">No hay reviews todavía para este destino.</p>
    {% endif %}

{% endblock content %}
